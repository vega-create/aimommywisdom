---
import { siteConfig } from '../site.config';
import '../styles/global.css';

interface Props {
  title?: string;
  description?: string;
  activePage?: string;
}

const { title, description, activePage = '' } = Astro.props;
const pageTitle = title ? `${title} – ${siteConfig.name}` : `${siteConfig.name} – ${siteConfig.tagline}`;
const pageDesc = description || siteConfig.description;
const canonicalURL = new URL(Astro.url.pathname, siteConfig.url);
---

<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{pageTitle}</title>
  <meta name="description" content={pageDesc}>
  <link rel="canonical" href={canonicalURL}>
  <meta property="og:title" content={pageTitle}>
  <meta property="og:description" content={pageDesc}>
  <meta property="og:type" content="website">
  <meta property="og:url" content={canonicalURL}>
  <meta property="og:site_name" content={siteConfig.name}>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700;900&family=Noto+Serif+TC:wght@700;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link rel="icon" type="image/png" href="/favicon.png">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  {siteConfig.analytics.ga4 && (
    <Fragment>
      <script async src={`https://www.googletagmanager.com/gtag/js?id=${siteConfig.analytics.ga4}`}></script>
      <script define:vars={{ gaId: siteConfig.analytics.ga4 }}>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments)}
        gtag('js', new Date());
        gtag('config', gaId);
      </script>
    </Fragment>
  )}
  {siteConfig.adsense.enabled && (
    <script async src={`https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=${siteConfig.adsense.client}`} crossorigin="anonymous"></script>
  )}
</head>
<body>
<header class="header">
  <div class="header-inner">
    <a href="/" class="logo"><img src="/images/logo.png" alt={siteConfig.name}></a>
    <ul class="main-nav">
      <li><a href="/about/" class:list={[{ active: activePage === 'about' }]}>關於我們</a></li>
      <li><a href="/services/" class:list={[{ active: activePage === 'services' }]}>我們的服務</a></li>
      <li>
        <a href="/cases/" class:list={[{ active: activePage === 'cases' }]}>成功案例</a>
        <div class="dropdown">
          <a href="/cases/cleanservice/">海外清潔案例</a>
          <a href="/cases/medicalaesthetics/">醫美案例</a>
          <a href="/cases/softfurnishingdesign/">軟裝設計</a>
          <a href="/cases/interiordesign/">室內設計</a>
        </div>
      </li>
      <li><a href="/works/" class:list={[{ active: activePage === 'works' }]}>作品集</a></li>
      <li><a href="/contact/" class:list={[{ active: activePage === 'contact' }]}>聯絡我們</a></li>
    </ul>
    <button class="mobile-toggle" id="menuOpen" aria-label="開啟選單"><i class="fas fa-bars"></i></button>
  </div>
</header>
<div class="mobile-menu" id="mobileMenu">
  <div class="mobile-menu-inner">
    <div class="mobile-menu-close"><button id="menuClose" aria-label="關閉選單"><i class="fas fa-times"></i></button></div>
    <a href="/">首頁</a>
    <a href="/about/">關於我們</a>
    <a href="/services/">我們的服務</a>
    <a href="/cases/">成功案例</a>
    <a href="/cases/cleanservice/" class="sub-link">海外清潔案例</a>
    <a href="/cases/medicalaesthetics/" class="sub-link">醫美案例</a>
    <a href="/cases/softfurnishingdesign/" class="sub-link">軟裝設計</a>
    <a href="/cases/interiordesign/" class="sub-link">室內設計</a>
    <a href="/works/">作品集</a>
    <a href="/contact/">聯絡我們</a>
  </div>
</div>
<main><slot /></main>
<footer class="footer">
  <div class="footer-inner">
    <div class="footer-top-label">品牌行銷最佳選擇</div>
    <div class="footer-top-title">AI行銷讓行銷簡單又有效</div>
    <div class="footer-info">
      © Copyright {new Date().getFullYear()} {siteConfig.name}. All rights reserved.<br>
      統編：{siteConfig.company.taxId}<br>
      {siteConfig.company.name}<br>
      電話：{siteConfig.company.phone}<br>
      地址：{siteConfig.company.address}<br>
      <a href="/refund/">服務退換貨政策</a> ｜ <a href="/privacy/">隱私權政策</a>
    </div>
  </div>
</footer>
<script>
  const menuOpen = document.getElementById('menuOpen');
  const menuClose = document.getElementById('menuClose');
  const mobileMenu = document.getElementById('mobileMenu');
  menuOpen?.addEventListener('click', () => mobileMenu?.classList.add('active'));
  menuClose?.addEventListener('click', () => mobileMenu?.classList.remove('active'));
  mobileMenu?.addEventListener('click', (e) => {
    if (e.target === mobileMenu) mobileMenu.classList.remove('active');
  });
</script>
</body>
</html>
